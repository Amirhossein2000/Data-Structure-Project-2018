!function(e){function t(t){for(var s,a,l=t[0],o=t[1],c=t[2],d=0,m=[];d<l.length;d++)a=l[d],r[a]&&m.push(r[a][0]),r[a]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);for(u&&u(t);m.length;)m.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,l=1;l<n.length;l++){var o=n[l];0!==r[o]&&(s=!1)}s&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},r={4:0},i=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var l=window.webpackJsonp=window.webpackJsonp||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;i.push([945,0]),n()}({945:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),i=n(12),a=n.n(i),l=n(1),o=n(3),c=n(39),u=n(2),d=n.n(u),m={"Fetching course list failed.":"دریافت لیست کلاس‌ها و مسابقات با خطا مواجه شد.","Fetching assignment list failed.":"دریافت لیست تمرین‌ها با خطا مواجه شد.","Forked successfully.":"کپی کردن سؤال با موفقیت انجام شد.","Fork failed.":"کپی کردن سؤال با مشکل مواجه شد."};function f(e){return e in m?m[e]:e}var p="FETCH_AO_REQUEST",h="FETCH_AO_SUCCESS",g="FETCH_AO_FAILURE";function v(){return function(e){e({type:p}),NProgress.start(),$.ajax({type:"GET",url:quera_urls["problemset:fork_ao_list"]()}).done(function(t){e(function(e){return{type:h,ao_list:e}}(t.ao_list))}).fail(function(t,n,s){e({type:g}),new Noty({text:f("Fetching course list failed."),type:"error"}).show()}).always(function(){NProgress.done()})}}var E="FETCH_ASSIGNMENTS_REQUEST",y="FETCH_ASSIGNMENTS_SUCCESS",F="FETCH_ASSIGNMENTS_FAILURE";function _(e){return function(t){t({type:E}),NProgress.start(),$.ajax({type:"GET",url:quera_urls["problemset:fork_assignment_list"](e)}).done(function(e){t(function(e){return{type:y,assignment_list:e}}(e.assignment_list))}).fail(function(e,n,s){t({type:F}),new Noty({text:f("Fetching assignment list failed."),type:"error"}).show()}).always(function(){NProgress.done()})}}var b="SELECT_AO";function S(e){return{type:b,ao_id:e}}var k="SELECT_ASSIGNMENT";function N(e){return{type:k,assignment_id:e}}var A="FORK_REQUEST",w="FORK_SUCCESS",T="FORK_FAILURE";function O(){return{type:T}}function x(e,t){return function(n){n({type:A}),NProgress.start(),$.ajax({type:"GET",url:quera_urls["problemset:fork"](e,t)}).done(function(e){e.success?(n({type:w}),new Noty({text:f("Forked successfully."),type:"success"}).show(),$("#fork-modal").modal("hide")):(n(O()),new Noty({text:f("Fork failed."),type:"error"}).show())}).fail(function(e,t,s){n(O()),new Noty({text:f("Fork failed."),type:"error"}).show()}).always(function(){NProgress.done()})}}var C={ao:{list:[],isFetching:!0,selected:null},assignment:{list:[],isFetching:!1,selected:null},isForking:!1};class j extends r.a.Component{constructor(e){super(e),this.handleSelectAo=this.handleSelectAo.bind(this),this.handleSelectAssignment=this.handleSelectAssignment.bind(this),this.handleFork=this.handleFork.bind(this)}componentWillMount(){this.props.actions.fetchAo()}handleSelectAo(e){var t=this.props.actions;t.selectAo(e),t.fetchAssignments(e)}handleSelectAssignment(e){this.props.actions.selectAssignment(e)}handleFork(){var e=this.props,t=e.state,n=t.assignment,s=t.isForking,r=e.actions;s||r.fork(problemset_problem_id,n.selected)}render(){var e,t=this,n=this.props.state,s=n.ao,i=n.assignment,a=n.isForking,l=null;return s.list.length>0&&(l=r.a.createElement("div",{className:"ui large fluid vertical borderless menu"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"header"},"انتخاب کلاس یا مسابقه")),s.list.map(function(e){return r.a.createElement("a",{className:`${s.selected==e.id?"active":""} item`,key:e.id,onClick:function(){t.handleSelectAo(e.id)}},e.name)}))),e=i.list.length>0?r.a.createElement("div",{className:"ui large fluid vertical borderless menu"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"header"},"انتخاب تمرین")),i.list.map(function(e){return r.a.createElement("a",{className:`${i.selected==e.id?"active":""} item`,key:e.id,onClick:function(){t.handleSelectAssignment(e.id)}},e.name)})):null!=s.selected?r.a.createElement("p",null,"در کلاس انتخاب‌شده تمرینی وجود ندارد."):r.a.createElement("p",null,"کلاس یا مسابقه انتخاب نشده است."),r.a.createElement("div",null,r.a.createElement("div",{className:"ui three steps",style:{border:"none",textAlign:"center",minHeight:100}},r.a.createElement("div",{className:"step fork-step"},r.a.createElement("div",{className:`ui ${s.isFetching?"active":""} inverted dimmer`},r.a.createElement("div",{className:"ui text loader"},"در حال دریافت لیست کلاس‌ها و مسابقات")),l),r.a.createElement("div",{className:"step fork-step"},r.a.createElement("div",{className:`ui ${i.isFetching?"active":""} inverted dimmer`},r.a.createElement("div",{className:"ui text loader"},"در حال دریافت لیست تمرین‌ها")),e),r.a.createElement("div",{className:"step fork-step"},r.a.createElement("button",{className:`ui blue ${i.selected?"":"disabled"} ${a?"loading":""} button`,onClick:this.handleFork},"کپی"))))}}var P=j=Object(o.connect)(function(e){return{state:{ao:e.ao,assignment:e.assignment,isForking:e.isForking}}},function(e){return{actions:Object(l.b)({fetchAo:v,selectAo:S,fetchAssignments:_,selectAssignment:N,fork:x},e)}})(j),M=Object(l.e)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return d()({ao:{isFetching:!0,selected:null}},e);case h:return d()({ao:{isFetching:!1,selected:null,list:t.ao_list}},e);case g:return d()({ao:{isFetching:!1,selected:null}},e);case b:return d()({ao:{selected:t.ao_id}},e);case E:return d()({assignment:{isFetching:!0,selected:null}},e);case y:return d()({assignment:{isFetching:!1,selected:null,list:t.assignment_list}},e);case F:return d()({assignment:{isFetching:!1,selected:null}},e);case k:return d()({assignment:{selected:t.assignment_id}},e);case A:return d()({isForking:!0},e);case w:case T:return d()({isForking:!1},e);default:return e}},Object(l.d)(Object(l.a)(c.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));$("#fork-problem").click(function(){$("#fork-modal").modal({observeChanges:!0,transition:"drop"}).modal("show"),a.a.render(r.a.createElement(o.Provider,{store:M},r.a.createElement(P,null)),document.getElementById("fork-app"))})}});